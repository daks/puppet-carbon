#!/etc/init/carbon-relay.conf
description	"Carbon relay server"
 
start on filesystem or runlevel [2345]
stop on runlevel [!2345]
 
umask 022
expect fork
respawn
 
pre-start script
    test -d /opt/graphite || { stop; exit 0; }
end script
 
chdir /opt/graphite
 
exec start-stop-daemon --oknodo --chdir /opt/graphite --user graphite --chuid graphite --pidfile /opt/graphite/storage/carbon-relay-a.pid --name carbon-relay --startas /opt/graphite/bin/carbon-relay.py --instance=a --start start
